/*
gettit.js v0.3.2

The MIT License
Copyright (c) 2012 Matthew DeLambo <delambo@gmail.com>
*/
(function(){function A(c,b,f,h,q){b&&n(b,function(b){var c=document.createElement("link");c.href=(b.indexOf("://")>0?b:f+b)+(h?h:"");c.rel="stylesheet";c.type="text/css";document.getElementsByTagName("head")[0].appendChild(c)});n(c,function(b){b=(b.indexOf("://")>0?b:f+b)+(h?h:"");s.$LAB.queueScript(b).queueWait()});s.$LAB.queueWait(function(){q&&q()});s.$LAB.runQueue()}function B(c,b,f){var h,q=navigator.appName=="Microsoft Internet Explorer",v=c.indexOf("://")>0&&/^\w+\:\/\/\/?[^\/]+/.exec(c)[0]!=
/^\w+\:\/\/\/?[^\/]+/.exec(location.href)[0];h=q&&v?new XDomainRequest:new XMLHttpRequest;h.open("GET",c+(b?b:""));h.onreadystatechange=function(){h.readyState==4&&h.status==200&&f(h.responseText);return!0};h.send(null)}function n(c,b,f){if(c!=null)for(var h=0,q=c.length;h<q;h++)if(h in c&&b.call(f,c[h],h,c)==={})break}function C(c){n(Array.prototype.slice.call(arguments,1),function(b){for(var f in b)b[f]!==void 0&&(c[f]=b[f])});return c}function D(c){for(var b=-1,f=c.length;c.charCodeAt(--f)<33;);
for(;c.charCodeAt(++b)<33;);return c.slice(b,f+1)}function z(c){if(!c)return null;c.indexOf("?")>-1&&(c=c.substring(0,c.indexOf("?")));return c.match(/(\w*)\.\w*$/)[1]}var E={isDebugging:!1,assets:"assets.yml",jsAssets:[],cssAssets:[],env:"production",path:"",templateNs:"window.JST",templateExt:"jst",templateFunc:"",version:"",cb:"(function(){})"},F=function(){function c(b,c,q){b[c]=function(b){return new Function("obj","var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+
b.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(b,a){return"',"+a.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(b,a){return"');"+a.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');")}(q)}function b(b,c,q,v){q=q.replace(/"/g,'\\"').replace(/(\r)?\n/g,"");b[c]=eval(v+'("'+q+'")')}return{compile:function(f,h,q,v){f=eval(f+"="+f+"||{};");v?b(f,h,q,v):c(f,h,
q)}}}(),s={};(function(c){function b(a,b){var d=/^\w+\:\/\//;/^\/\/\/?/.test(a)?a=location.protocol+a:!d.test(a)&&a.charAt(0)!="/"&&(a=(b||"")+a);return d.test(a)?a:(a.charAt(0)=="/"?x:y)+a}function f(a,b){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b}function h(a,b,d,e){a.onload=a.onreadystatechange=function(){if(!(a.readyState&&a.readyState!="complete"&&a.readyState!="loaded"||b[d]))a.onload=a.onreadystatechange=null,e()}}function q(a){a.ready=a.finished=!0;for(var b=0;b<a.finished_listeners.length;b++)a.finished_listeners[b]();
a.ready_listeners=[];a.finished_listeners=[]}function v(a,b,e,i,c){setTimeout(function(){var g,m=b.real_src,f;if("item"in j){if(!j[0]){setTimeout(arguments.callee,25);return}j=j[0]}g=document.createElement("script");if(b.type)g.type=b.type;if(b.charset)g.charset=b.charset;if(c)w?(e.elem=g,l?(g.preload=!0,g.onpreload=i):g.onreadystatechange=function(){g.readyState=="loaded"&&i()},g.src=m):c&&m.indexOf(x)==0&&a[d]?(f=new XMLHttpRequest,f.onreadystatechange=function(){if(f.readyState==4)f.onreadystatechange=
function(){},e.text=f.responseText+"\n//@ sourceURL="+m,i()},f.open("GET",m),f.send()):(g.type="text/cache-script",h(g,e,"ready",function(){j.removeChild(g);i()}),g.src=m,j.insertBefore(g,j.firstChild));else{if(k)g.async=!1;h(g,e,"finished",i);g.src=m;j.insertBefore(g,j.firstChild)}},0)}function o(){function k(a,b,d){function e(){i!=null&&(i=null,q(d))}var i;if(!t[b.src].finished){if(!a[g])t[b.src].finished=!0;i=d.elem||document.createElement("script");if(b.type)i.type=b.type;if(b.charset)i.charset=
b.charset;h(i,d,"finished",e);d.elem?d.elem=null:d.text?(i.onload=i.onreadystatechange=null,i.text=d.text):i.src=b.real_src;j.insertBefore(i,j.firstChild);d.text&&e()}}function y(a,d,i,c){var f,h,j=function(){d.ready_cb(d,function(){k(a,d,f)})},o=function(){d.finished_cb(d,i)};d.src=b(d.src,a[e]);d.real_src=d.src+(a[m]?(/\?.*$/.test(d.src)?"&_":"?_")+~~(Math.random()*1E9)+"=":"");t[d.src]||(t[d.src]={items:[],finished:!1});h=t[d.src].items;a[g]||h.length==0?(f=h[h.length]={ready:!1,finished:!1,ready_listeners:[j],
finished_listeners:[o]},v(a,d,f,c?function(){f.ready=!0;for(var a=0;a<f.ready_listeners.length;a++)f.ready_listeners[a]();f.ready_listeners=[]}:function(){q(f)},c)):(f=h[0],f.finished?o():f.finished_listeners.push(o))}function r(){function a(d,e){d.ready=!0;d.exec_trigger=e;b()}function d(a,e){a.ready=a.finished=!0;a.exec_trigger=null;for(var i=0;i<e.scripts.length;i++)if(!e.scripts[i].finished)return;e.finished=!0;b()}function b(){for(;m<c.length;)if(Object.prototype.toString.call(c[m])=="[object Function]")try{c[m++]()}catch(a){}else{if(!c[m].finished){for(var d=
c[m],e=!1,i=0;i<d.scripts.length;i++)if(d.scripts[i].ready&&d.scripts[i].exec_trigger)e=!0,d.scripts[i].exec_trigger(),d.scripts[i].exec_trigger=null;if(e)continue;break}m++}m==c.length&&(j=h=!1)}var e,g=f(n,{}),c=[],m=0,h=!1,j;e={script:function(){for(var b=0;b<arguments.length;b++)(function(b,m){var k;Object.prototype.toString.call(b)=="[object Array]"||(m=[b]);for(var o=0;o<m.length;o++){if(!j||!j.scripts)c.push(j={scripts:[],finished:!0});b=m[o];Object.prototype.toString.call(b)=="[object Function]"&&
(b=b());if(b)Object.prototype.toString.call(b)=="[object Array]"?(k=[].slice.call(b),k.unshift(o,1),[].splice.apply(m,k),o--):(typeof b=="string"&&(b={src:b}),b=f(b,{ready:!1,ready_cb:a,finished:!1,finished_cb:d}),j.finished=!1,j.scripts.push(b),y(g,b,j,x&&h),h=!0,g[i]&&e.wait())}})(arguments[b],arguments[b]);return e},wait:function(){if(arguments.length>0){for(var a=0;a<arguments.length;a++)c.push(arguments[a]);j=c[c.length-1]}else j=!1;b();return e}};return{script:e.script,wait:e.wait,setOptions:function(a){f(a,
g);return e}}}var n={},x=w||u,l=[],t={},p;n[d]=!0;n[i]=!1;n[g]=!1;n[m]=!1;n[e]="";return p={setGlobalDefaults:function(a){f(a,n);return p},setOptions:function(){return r().setOptions.apply(null,arguments)},script:function(){return r().script.apply(null,arguments)},wait:function(){return r().wait.apply(null,arguments)},queueScript:function(){l[l.length]={type:"script",args:[].slice.call(arguments)};return p},queueWait:function(){l[l.length]={type:"wait",args:[].slice.call(arguments)};return p},runQueue:function(){for(var a=
p,b=l.length,d;--b>=0;)d=l.shift(),a=a[d.type].apply(null,d.args);return a},noConflict:function(){c.$LAB=a;return p},sandbox:function(){return o()}}}var a=c.$LAB,d="UseLocalXHR",i="AlwaysPreserveOrder",g="AllowDuplicates",m="CacheBust",e="BasePath",y=/^[^?#]*\//.exec(location.href)[0],x=/^\w+\:\/\/\/?[^\/]+/.exec(y)[0],j=document.head||document.getElementsByTagName("head"),r=c.opera&&Object.prototype.toString.call(c.opera)=="[object Opera]"||"MozAppearance"in document.documentElement.style,n=document.createElement("script"),
l=typeof n.preload=="boolean",w=l||n.readyState&&n.readyState=="uninitialized",k=!w&&n.async===!0,u=!w&&!k&&!r;c.$LAB=o();(function(a,b,d){if(document.readyState==null&&document[a])document.readyState="loading",document[a](b,d=function(){document.removeEventListener(b,d,!1);document.readyState="complete"},!1)})("addEventListener","DOMContentLoaded")})(s);s.$LAB.setOptions({AlwaysPreserveOrder:!0,AllowDuplicates:!0});var H=function(){function c(a){return{parent:null,length:0,level:a,lines:[],children:[],
addChild:function(a){this.children.push(a);a.parent=this;++this.length}}}function b(a){var a=a.replace(o.trim,""),d=null;if(a=="true")return!0;else if(a=="false")return!1;else if(a==".NaN")return Number.NaN;else if(a=="null")return null;else if(a==".inf")return Number.POSITIVE_INFINITY;else if(a=="-.inf")return Number.NEGATIVE_INFINITY;else if(d=a.match(o.dashesString))return d[1];else if(d=a.match(o.quotesString))return d[1];else if(d=a.match(o["float"]))return parseFloat(d[0]);else if(d=a.match(o.integer))return parseInt(d[0]);
else if(d=a.match(o.single_key_value))return a={},a[d[1]]=b(d[2]),a;else if(d=a.match(o.array)){for(var i=0,g=" ",a=[],c="",e=!1,f=0,h=d[1].length;f<h;++f){g=d[1][f];if(g=="'"||g=='"')if(e===!1){e=g;c+=g;continue}else{if(g=="'"&&e=="'"||g=='"'&&e=='"'){e=!1;c+=g;continue}}else if(e===!1&&(g=="["||g=="{"))++i;else if(e===!1&&(g=="]"||g=="}"))--i;else if(e===!1&&i==0&&g==","){a.push(b(c));c="";continue}c+=g}c.length>0&&a.push(b(c));return a}else if(d=a.match(o.map)){i=0;a=[];c="";e=!1;f=0;for(h=d[1].length;f<
h;++f){g=d[1][f];if(g=="'"||g=='"')if(e===!1){e=g;c+=g;continue}else{if(g=="'"&&e=="'"||g=='"'&&e=='"'){e=!1;c+=g;continue}}else if(e===!1&&(g=="["||g=="{"))++i;else if(e===!1&&(g=="]"||g=="}"))--i;else if(e===!1&&i==0&&g==","){a.push(c);c="";continue}c+=g}c.length>0&&a.push(c);i={};f=0;for(h=a.length;f<h;++f)if(d=a[f].match(o.key_value))i[d[1]]=b(d[2]);return i}else return a}function f(a){for(var b=a.children,a=[a.lines.join(" ")],c=0,g=b.length;c<g;++c)a.push(f(b[c]));return a.join("\n")}function h(a){for(var b=
a.children,a=a.lines.join("\n"),c=0,g=b.length;c<g;++c)a+=h(b[c]);return a}function q(a){for(var d=null,c={},g=null,m=null,e=null,l=-1,p=[],j=!0,r=0,G=a.length;r<G;++r)if(!(l!=-1&&l!=a[r].level)){p.push(r);for(var l=a[r].level,g=a[r].lines,m=a[r].children,e=null,t=0,w=g.length;t<w;++t){var k=g[t];if(d=k.match(o.key))if(k=d[1],k[0]=="-"&&(k=k.replace(o.item,""),j&&typeof c.length==="undefined"&&(c=[]),e!=null&&c.push(e),e={},j=!0),typeof d[2]!="undefined")if(d=d[2].replace(o.trim,""),d[0]=="&"){var u=
q(m);e!=null?e[k]=u:c[k]=u;n[d.substr(1)]=u}else if(d[0]=="|")e!=null?e[k]=h(m.shift()):c[k]=h(m.shift());else if(d[0]=="*"){if(d=d.substr(1),u={},typeof n[d]!="undefined"){for(var s in n[d])u[s]=n[d][s];e!=null?e[k]=u:c[k]=u}}else d[0]==">"?e!=null?e[k]=f(m.shift()):c[k]=f(m.shift()):e!=null?e[k]=b(d):c[k]=b(d);else e!=null?e[k]=q(m):c[k]=q(m);else if(k.match(/^-\s*$/))j&&typeof c.length==="undefined"&&(c=[]),e!=null&&c.push(e),e={},j=!0;else if(d=k.match(/^-\s*(.*)/))e!=null?e.push(b(d[1])):(j&&
(j=!1,typeof c.length==="undefined"&&(c=[])),c.push(b(d[1])))}e!=null&&(j&&(j=!1,typeof c.length==="undefined"&&(c=[])),c.push(e))}for(r=p.length-1;r>=0;--r)a.splice.call(a,p[r],1);return c}var n=[],o={regLevel:/^([\s\-]+)/,invalidLine:/^\-\-\-|^\.\.\.|^\s*#.*|^\s*$/,dashesString:/^\s*\"([^\"]*)\"\s*$/,quotesString:/^\s*\'([^\']*)\'\s*$/,"float":/^[+-]?[0-9]+\.[0-9]+(e[+-]?[0-9]+(\.[0-9]+)?)?$/,integer:/^[+-]?[0-9]+$/,array:/\[\s*(.*)\s*\]/,map:/\{\s*(.*)\s*\}/,key_value:/([a-z0-9_-][ a-z0-9_-]*):( .+)/i,
single_key_value:/^([a-z0-9_-][ a-z0-9_-]*):( .+?)$/i,key:/([a-z0-9_-][ a-z0-9_-]+):( .+)?/i,item:/^-\s+/,trim:/^\s+|\s+$/,comment:/([^\'\"#]+([\'\"][^\'\"]*[\'\"])*)*(#.*)?/};return{eval:function(a){n=[];var b;b=a.split("\n");var f=o.comment,g;for(g in b)if(a=b[g].match(f))typeof a[3]!=="undefined"&&(b[g]=a[0].substr(0,a[0].length-a[3].length));b=b.join("\n");var h;a:{g=o.regLevel;a=o.invalidLine;b=b.split("\n");var e=f=0,l=[],p=new c(-1),j=new c(0);p.addChild(j);var r=[],s="";l.push(j);r.push(f);
for(var t=0,w=b.length;t<w;++t)if(s=b[t],!s.match(a)){f=(h=g.exec(s))?h[1].length:0;if(f>e)e=j,j=new c(f),e.addChild(j),l.push(j),r.push(f);else if(f<e){for(var e=!1,k=r.length-1;k>=0;--k)if(r[k]==f){j=new c(f);l.push(j);r.push(f);l[k].parent!=null&&l[k].parent.addChild(j);e=!0;break}if(!e){h=void 0;break a}}j.lines.push(s.replace(o.trim,""));e=f}h=p}return q(h.children)}}}(),l,p=(document.getElementsByTagName("head")[0]||document.documentElement).firstChild;p&&p.tagName==="SCRIPT"&&p.src.indexOf("gettit")>
0?l=p:(p=document.getElementsByTagName("script"),l=p[p.length-1]);(function(c){var b=C(E,c),f=function(){b.cb&&eval(b.cb+"()")},h="?r="+b.version||(new Date).getTime();if(b.env=="production"&&!b.isDebugging)A(b.jsAssets,b.cssAssets,b.path,h,f);else{var l=[],p=[];n(b.jsAssets,function(b){l.push(z(b))});n(b.cssAssets,function(b){p.push(z(b))});B(b.path+b.assets,h,function(c){var a=H.eval(c),d=[],i=[],g=[];C(b,{templateFunc:a.template_function,templateNs:a.template_namespace,templateExt:a.template_extension});
a.javascripts&&n(l,function(c){a.javascripts[c]&&n(a.javascripts[c],function(a){a.substr(a.length-3)==".js"?d.push(a):a.substr(a.length-b.templateExt.length)==b.templateExt&&g.push(a)})});a.stylesheets&&n(p,function(b){a.stylesheets[b]&&(i=i.concat(a.stylesheets[b]))});A(d,i,b.path,h,function(){g.length||f();var a=0;n(g,function(c){B(b.path+c,h,function(d){F.compile(b.templateNs,z(c),d,b.templateFunc);++a===g.length&&f()})})})})}})({isDebugging:(/debug_assets=(.+?)(&|$)/.exec(location.search)||[,
null])[1]==="true",jsAssets:function(){var c=[];n(l.getAttribute("data-js-assets")&&l.getAttribute("data-js-assets").split(",")||[],function(b){c.push(D(b))});return c}(),cssAssets:function(){var c=[];n(l.getAttribute("data-css-assets")&&l.getAttribute("data-css-assets").split(",")||[],function(b){c.push(D(b))});return c}(),assets:l.getAttribute("data-assets")||void 0,env:l.getAttribute("data-env")||void 0,path:l.getAttribute("data-env-path")||void 0,version:l.getAttribute("data-version")||void 0,
cb:l.getAttribute("data-callback")||void 0})})();
